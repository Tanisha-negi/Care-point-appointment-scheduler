<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forgot Password | CarePoint</title>

  <!-- Boxicons -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">

</head>
<body>

  <div id="flash-root"
     class="flash-container"
     aria-live="polite"
     aria-atomic="true">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="flash-message flash-{{ category }}">
          <span class="flash-text">{{ message }}</span>
          <button class="flash-close" aria-label="Close" type="button">&times;</button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
</div>


  <div class="wrapper">
    <div class="form-header">
      <div class="titles">
        <div class="title-forgot">Forgot Password</div>
      </div>
    </div>

    <!-- Forgot Password Form -->
    <form action="{{ url_for('auth.forgot_password') }}" method="POST" class="forgot-form" autocomplete="off">
      <div class="input-box">
        <input type="text" class="input-field" id="forgot-email" name="email" required>
        <label for="forgot-email" class="label">Enter your registered email</label>
        <i class="bx bx-envelope icon"></i>
      </div>

      <div class="input-box">
        <button type="submit" class="btn-submit">
          Send OTP <i class="bx bx-mail-send"></i>
        </button>
      </div>

      <div class="switch-form">
        <span>Remembered your password? <a href="{{ url_for('auth.login') }}">Back to Login</a></span>
      </div>
    </form>
  </div>

  <script>
  // Auto-dismiss after 3s (with slight stagger for multiple)
  window.addEventListener('DOMContentLoaded', () => {
    const toasts = document.querySelectorAll('.flash-message');

    toasts.forEach((toast, i) => {
      // close button
      toast.querySelector('.flash-close')?.addEventListener('click', () => {
        toast.classList.add('hide');
        setTimeout(() => toast.remove(), 280);
      });

      // auto-hide after 3s
      setTimeout(() => {
        if (!toast.classList.contains('hide')) {
          toast.classList.add('hide');
          setTimeout(() => toast.remove(), 280);
        }
      }, 3000 + i * 120); // stagger so multiples don't vanish at once
    });
  });
</script>
</body>
</html>
