<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login | CarePoint</title>

    <!-- Boxicons -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/auth.css') }}"
    />
  </head>
  <body>
    <!-- Flash Messages -->
    <div class="flash-container">
      {% with messages = get_flashed_messages(with_categories=true) %} 
      {% if messages %} 
      {% for category, message in messages %}
      <div class="flash-message flash-{{ category }}">
        <span class="flash-text">{{ message }}</span>
        <button
          class="flash-close"
          onclick="this.parentElement.classList.add('hide')"
        >
          &times;
        </button>
      </div>
      {% endfor %} 
      {% endif %} 
      {% endwith %}
    </div>

    <div class="wrapper">
      <div class="form-header">
        <div class="titles">
          <div class="title-login">Login</div>
          <div class="title-register">Register</div>
        </div>
      </div>

      <!-- Login -->
      <form
        action="{{ url_for('auth.login') }}"
        method="POST"
        class="login-form"
        autocomplete="off"
      >
        <div class="input-box">
          <input
            type="text"
            class="input-field"
            id="log-email"
            name="email"
            required
          />
          <label for="log-email" class="label">Email</label>
          <i class="bx bx-envelope icon"></i>
        </div>
        <div class="input-box password-toggle">
          <input
            type="password"
            class="input-field"
            id="log-pass"
            name="password"
            required
          />
          <label for="log-pass" class="label">Password</label>
          <i class="bx bx-lock-alt icon lock-icon"></i>
        </div>
        <div class="form-cols">
          <div class="col-1"></div>
          <div class="col-2">
            <a href="{{ url_for('auth.forgot_password') }}">Forgot password?</a>
          </div>
        </div>
        <div class="input-box">
          <button class="btn-submit" id="SignInBtn">
            Sign In <i class="bx bx-log-in"></i>
          </button>
        </div>
        <div class="switch-form">
          <span>
            Don't have an account?
            <a href="#" onclick="registerFunction()">Register</a>
          </span>
        </div>
      </form>

      <!-- Signup -->
      <form
        action="{{ url_for('auth.signup') }}"
        method="POST"
        class="register-form"
        autocomplete="off"
      >
        <div class="input-box">
          <input
            type="text"
            class="input-field"
            id="reg-name"
            name="name"
            required
          />
          <label for="reg-name" class="label">Username</label>
          <i class="bx bx-user icon"></i>
        </div>
        <div class="input-box">
          <input
            type="text"
            class="input-field"
            id="reg-email"
            name="email"
            required
          />
          <label for="reg-email" class="label">Email</label>
          <i class="bx bx-envelope icon"></i>
        </div>
        <div class="input-box password-toggle">
          <input
            type="password"
            class="input-field"
            id="reg-pass"
            name="password"
            required
          />
          <label for="reg-pass" class="label">Enter Password</label>
          <i class="bx bx-lock-alt icon lock-icon"></i>
          <i class="bx bx-hide icon eye-icon" style="display:none;"></i>
        </div>
        <div class="input-box password-toggle">
          <input
            type="password"
            class="input-field"
            id="reg-conf"
            name="confirm_password"
            required
          />
          <label for="reg-conf" class="label">Confirm Password</label>
          <i class="bx bx-lock-alt icon lock-icon"></i>
        </div>
        <div class="form-cols">
          <div class="col-1">
            <input type="checkbox" id="agree" />
            <label for="agree"> I agree to terms & conditions</label>
          </div>
          <div class="col-2"></div>
        </div>
        <div class="input-box">
          <button class="btn-submit" id="SignUpBtn">
            Sign Up <i class="bx bx-log-out"></i>
          </button>
        </div>
        <div class="switch-form">
          <span>
            Already have an account?
            <a href="{{ url_for('auth.login') }}" onclick="loginFunction()">Login</a>
          </span>
        </div>
      </form>
    </div>

    <script src="{{ url_for('static', filename='js/login.js') }}"></script>
  </body>
</html>
