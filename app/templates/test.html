<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Password toggle — test</title>

  <!-- Boxicons -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet"/>

  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Poppins, sans-serif; padding: 40px; background:#f3f6fb; }
    .card { width: 420px; margin: 40px auto; padding: 28px; background: #fff; border-radius: 12px; box-shadow: 0 8px 18px rgba(0,0,0,0.06); }

    .field { margin-bottom: 18px; position: relative; }
    .field label { display:block; margin-bottom:6px; font-weight:600; color:#333; }
    .input-field {
      width:100%; padding:12px 44px 12px 14px; border:1px solid #ddd; border-radius:10px;
      font-size:15px; box-sizing:border-box;
    }

    /* icon positioning */
    .password-toggle { position: relative; }
    .password-toggle .icon {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      cursor: pointer;
      color: #6b7280;
      user-select: none;
    }

    /* default: show lock, hide eye */
    .password-toggle .eye-icon { display: none; }
    .password-toggle .lock-icon { display: block; }

    /* when .show-eye present: show eye, hide lock */
    .password-toggle.show-eye .eye-icon { display: block; }
    .password-toggle.show-eye .lock-icon { display: none; }

    .hint { font-size:13px; color:#555; margin-top:6px; }
  </style>
</head>
<body>
  <div class="card">
    <h2 style="margin:0 0 12px">Login (demo)</h2>

    <div class="field">
      <label for="email">Email</label>
      <input id="email" class="input-field" type="email" placeholder="you@example.com"/>
    </div>

    <!-- Login password -->
    <div class="field password-toggle">
      <label for="login-pass">Password</label>
      <input id="login-pass" class="input-field" type="password" placeholder="Enter password" />
      <i class="bx bx-lock-alt lock-icon icon" aria-hidden="true"></i>
      <i class="bx bx-hide eye-icon icon" aria-hidden="true"></i>
      <div class="hint">Lock shows until you type — eye appears while typing.</div>
    </div>

    <hr style="margin:18px 0">

    <h3 style="margin:0 0 12px">Signup (demo)</h3>

    <!-- Signup password -->
    <div class="input-box password-toggle">
  <input
    type="password"
    class="input-field"
    id="log-pass"
    name="password"
    required
  />
  <label for="log-pass" class="label">Password</label>
  <!-- keep ONE lock icon -->
  <i class="bx bx-lock-alt lock-icon icon"></i>
  <!-- keep ONE eye icon (hidden initially) -->
  <i class="bx bx-hide eye-icon icon"></i>
</div>

/*
  Behavior:
   - default: .password-toggle has lock visible, eye hidden
   - when user types (input.value.length > 0) -> add .show-eye to container
     which shows eye and hides lock (CSS controls visibility)
   - clicking eye toggles input.type between password/text and swaps icon
   - also supports browser autofill (initial check + small timeout)
*/

document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.password-toggle').forEach(container => {
    const input = container.querySelector('.input-field');
    const lock = container.querySelector('.lock-icon');
    const eye  = container.querySelector('.eye-icon');

    if (!input || !lock || !eye) return;

    // update container state (class) based on input content
    function updateContainerState() {
      if (input.value && input.value.length > 0) {
        container.classList.add('show-eye');
        // ensure eye is showing the "hide" icon initially
        eye.classList.remove('bx-show');
        eye.classList.add('bx-hide');
      } else {
        container.classList.remove('show-eye');
        eye.classList.remove('bx-show');
        eye.classList.add('bx-hide');
        // if input cleared and was text, set back to password
        if (input.type !== 'password') input.type = 'password';
      }
    }

    // click eye -> toggle visibility and swap icon class
    eye.addEventListener('click', () => {
      if (input.type === 'password') {
        input.type = 'text';
        eye.classList.remove('bx-hide');
        eye.classList.add('bx-show');
      } else {
        input.type = 'password';
        eye.classList.remove('bx-show');
        eye.classList.add('bx-hide');
      }
      // keep caret at end
      input.focus();
      const len = input.value.length;
      input.setSelectionRange(len, len);
    });

    // update on input events
    input.addEventListener('input', updateContainerState);

    // check initial value (useful if autofill or pre-filled)
    updateContainerState();
    // some browsers autofill after load — double-check shortly after
    setTimeout(updateContainerState, 200);
  });
});
</script>
</body>
</html>
